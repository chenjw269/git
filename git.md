  
  
- [Git 介绍](#git-介绍)
  - [Git 概述](#git-概述)
  - [版本控制概述](#版本控制概述)
  - [两类版本控制](#两类版本控制)
  - [Git 工作机制](#git-工作机制)
  - [远程库](#远程库)
- [Git 命令](#git-命令)
  - [设置用户签名](#设置用户签名)
  - [初始化本地库](#初始化本地库)
  - [查看本地库状态](#查看本地库状态)
  - [添加到暂存区](#添加到暂存区)
  - [从暂存区删除](#从暂存区删除)
  - [提交到本地库](#提交到本地库)
  - [查看版本信息](#查看版本信息)
  - [查看日志信息](#查看日志信息)
  - [版本穿梭](#版本穿梭)
- [Git 分支](#git-分支)
  - [分支特性](#分支特性)
  - [分支创建](#分支创建)
  - [分支转换](#分支转换)
  - [分支合并](#分支合并)
  - [合并冲突解决](#合并冲突解决)
- [Idea 使用 Git](#idea-使用-git)
  
[返回目录](Readme.md)

##  Git 介绍
  
###  Git 概述
  
免费开源分布式版本控制工具（分布式相对于集中式而言）
  
[下载安装 git](http://git-scm.com/downloads )
  
注意将 git 添加到环境变量，以在命令行使用 git 命令
  
git 命令行中可以使用 Windows 和 Linux 的命令
  
###  版本控制概述
  
- 记录版本（文件内容）变化
- 查阅版本变化
- 切换特定版本
  
个人开发过渡到团队协作
  
###  两类版本控制
  
  
- 集中式版本控制（CVS，SVN）：单一的集中管理的服务器，协同工作时通过服务端连接到服务器，所有人操作同一份文件。优点是 1. 维护方便，2. 同步方便，3. 管理方便，缺点是服务器故障敏感
- 分布式版本控制（Git）：没有中央服务器，各个结点进行版本控制，通过远程库 / 代码托管中心和克隆 / 推送操作同步。优点是 1. 服务器故障情况下可以进行本地版本控制 2. 每个客户端都有完整备份
  
###  Git 工作机制
  
<img src="img/git工作机制.png"> 
  
  
本地库还可以进一步推送到远程库
  
###  远程库
  
远程库，也就是代码托管中心，是基于网络服务器的远程仓库
  
- 局域网：Gitlab
- 互联网：Github、Gitee
  
##  Git 命令
  
  
|命令|作用|
|--|--|
|`git config --global user.name`|设置用户签名|
|`git config --global user.email`|设置用户签名|
|`git init`|初始化本地库|
|`git status`|查看本地库状态|
|`git add xxx`|添加到暂存区|
|`git rm --cached xxx`|从暂存区删除|
|`git commit -m`|提交到本地库|
|`git reflog`|查看版本信息|
|`git log`|查看日志信息|
|`git reset --hard xxx`|版本穿梭|
  
###  设置用户签名
  
  
    git config --global user.name xxx
    git config --global user.email xxx
  
配置文件为用户目录下的 `.gitconfig` 文件
  
签名的作用是区分操作者身份，首次安装后必须设置
  
###  初始化本地库
  
  
    git init
  
创建 `.git` 目录，使 git 获得目录的管理权
  
###  查看本地库状态
  
  
    git status
  
输出三段日志
- 本地库的分支
- 历史提交信息
- 库内容信息
  
新文件会显示
###  添加到暂存区
  
  
    git add xxx
  
修改后的版本保存在暂存区，还可以删除而不影响本地库版本信息
###  从暂存区删除
  
  
    git rm --cached xxx
  
删除暂存区的文件，并不影响工作区中的文件
###  提交到本地库
  
生成历史版本信息，此时无法再被删除
  
由于 git 的版本管理系统，下一个版本需要基于上一个版本存在，所以无法删除单独一个版本，只能删除仓库
  
    git commit -m xxx xxx
  
- \-m 之后的参数是此次提交的日志信息
- 最后的参数是提交的内容
- 提交后生成了版本号
  
提交后输出的信息中可以看到，对于修改的行，会转换为删除一行然后新增一行
  
###  查看版本信息
  
多个版本的信息都会被显示
  
    git reflog  #版本信息
  
    版本号 （指针→分支）提交记录
    其他版本号 其他版本提交记录
  
可以看出，git 控制版本使用的不是在工作区同时存放多个副本
而是存放多份修改记录，并以版本号来标记，可以转换版本号来切换历史版本
  
###  查看日志信息
  
  
    git log     #详细日志
  
    完整版本号
    提交者
    提交时间
    提交日志
  
###  版本穿梭
  
  
    git reset --hard xxx
  
指定版本号，切换到特定版本
切换版本动作会成为一条单独的提交记录
  
`.git` 目录下的 HEAD 文件存放了指针指向的分支
`.git / refs / heads` 目录下的各分支文件存放了该分支当前指向的版本号
  
可以看出，切换版本的底层实现是，切换 `head` 指针指向的分支
每个分支会保存一个指针（版本号），指示某一个文件版本
每个分支内可以进行版本穿梭
  
##  Git 分支
  
  
|命令|作用|
|--|--|
|`git branch xxx`|创建分支|
|`git branch -v`|查看所有分支|
|`git checkout xxx`|切换分支|
|`git merge xxx`|合并到当前分支|
  
###  分支特性
  
  
开发和测试人员不应该直接修改用户使用的分支
因此最基本的场景是划分开发（Dev）分支和生产（master）分支
开发和测试人员使用开发分支，用户使用生产分支（的服务）
有时还会为紧急修复（hot-fix）设置分支
  
为了推进多个任务，程序员可以把自己的工作从开发主线上分离开，独立开发自己的分支
对于成功的分支，可以直接合并，移植到主分支
对于失败的分支，可以直接丢弃，不影响主分支
  
###  分支创建
  
  
    git branch xxx
  
创建一个名为 xxx 的分支
  
###  分支转换
  
  
    git checkout xxx
  
切换到名为 xxx 的分支
  
在每个分支下，都可以进行相同的修改、添加、提交操作
版本记录中，会保存每个分支的操作
切换到另一个分支，会切换到该分支下修改的最新版本，而非总修改的最新版本
  
###  分支合并
  
  
    git merge xxx
  
进入要合并的分支，然后指定被合并的分支以合并
被合并的分支仍然存在，两分支只在内容上存在联系
  
###  合并冲突解决
  
  
- 情况一
分支 2 没有对分支 1 的内容进行破坏，可以直接合并到分支 1
  
- 情况二
分支 2 和分支 1 在同一个文件的同一个位置，做出了完全不同的修改
如果直接合并，会出现合并冲突，`git status` 输出 `both modified`
打开文件，冲突内容会这样显示
  
        <<< HEAD
        xxx
        ======
        xxx
        >>> target branch name
    此时可以人为决定合并内容，并在文件中直接修改
    修改后再次添加、提交：`git commit -m xxx`，不再指定文件名以完成合并
  
##  Idea 使用 Git
  
  
  